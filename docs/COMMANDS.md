# Описание всех команд и их принцип работы

## Список команд их описание

- `mov`:
  - **Описание**: меняет местами регистры (их значения)
  - **Принимаемые значения**: на вход принимается 2 регистры одной разрядности
  - **Возращаемое значение**: ничего не выводит в стек, кучу или другие регистры
  - **Примеры**

```QASM
mov eax, ebx   ; Допустимо
mov al, rax    ; Недопустимо al - 8 битовый регистр, а rax - 65 битовый
mov [100], rax ; Недопустимо аргументы обязаны быть регистрами 
```

- `reg`
  - **Описание**: устанавливает значение для регистра
  - **Принимаемые значения**: принимает на вход пару из регистра и значения
  - **Возращаемое значение**: ничего не выводит в стек, кучу или другие регистры
  - **Примеры**

```QASM
reg rax, [255] ; Допустимо
reg rax, $0xAA ; Допустимо
reg rax, al    ; Допустимо, но не желательно
reg al,  260   ; Допустимо, но значение будет установлено в 255 (максимум для 8 бит)
reg 20, al     ; Недопустимо, первым всегда идет регистр
```

- `push`
  - **Описание**: пушит в стек данное значение
  - **Принимаемые значения**: некое значение, которое будет запушено в стек
  - **Возращаемое значение**: пуш в стек, а также устанавливает в регистр `RSP` новое значение верхушки стека
  - **Примеры**

```QASM
push [100] ; Допустимо
push $0xFF ; Допустимо
push rax   ; Допустимо
```

- `pop`
  - **Описание**: удаляет вершину стека
  - **Принимаемые значения**: нету
  - **Возращаемое значение**: устанавливает в регистр `RSP` новое значение верхушки стека
  - **Примеры**

```QASM
pop ; Допустимо
```

- `peek`
  - **Описание**: смотрит на верхушку стека
  - **Принимаемые значения**: нету
  - **Возращаемое значение**: устанавливает в регистр `R8` новое значение верхушки стека
  - **Примеры**

```QASM
peek ; Допустимо
```

- `eql`
  - **Описание**: сравнивает 2 значения на равенство
  - **Принимаемые значения**: 2 любых значения
  - **Возращаемое значение**: устанавливает в регистр `dl`, в малдший бит `1` если значения совпадают и `0` если нет
  - **Примеры**

```QASM
eql [100], [100]  ; Допустимо
eql rax, al       ; Допустимо
eql $0xAA, al     ; Допустимо
eql [100]         ; Недопустимо, тк на вход обязательно только 2 значения
```

- `less`
  - **Описание**: сравнивает 2 значения, меньше левое правого или нет
  - **Принимаемые значения**: 2 любых значения
  - **Возращаемое значение**: устанавливает в регистр `dl`, в малдший бит `1` если левое меньше правого и `0` если нет
  - **Примеры**

```QASM
less [100], [100]  ; Допустимо
less rax, al       ; Допустимо
less $0xAA, al     ; Допустимо
less [100]         ; Недопустимо, тк на вход обязательно только 2 значения
```

- `more`
  - **Описание**: сравнивает 2 значения, больше левое правого или нет
  - **Принимаемые значения**: 2 любых значения
  - **Возращаемое значение**: устанавливает в регистр `dl`, в малдший бит `1` если левое больше правого и `0` если нет
  - **Примеры**

```QASM
more [100], [100]  ; Допустимо
more rax, al       ; Допустимо
more $0xAA, al     ; Допустимо
more [100]         ; Недопустимо, тк на вход обязательно только 2 значения
```

- `neql`
  - **Описание**: сравнивает 2 значения на неравенство
  - **Принимаемые значения**: 2 любых значения
  - **Возращаемое значение**: устанавливает в регистр `dl`, в малдший бит `1` если значения не совпадают и `0` если совпадают
  - **Примеры**

```QASM
neql [100], [100]  ; Допустимо
neql rax, al       ; Допустимо
neql $0xAA, al     ; Допустимо
neql [100]         ; Недопустимо, тк на вход обязательно только 2 значения
```

- `jmp`
  - **Описание**: перепрыгивает на указанный блок кода
  - **Принимаемые значения**: метка блока кода
  - **Возращаемое значение**: не возвращает значение
  - **Примеры**

```QASM
jmp block ; Допустимо (при том условии, что блок кода под меткой block существует)
```

- `jep`
  - **Описание**: перепрыгивает на указанный блок кода, если вершина стека равна `1`
  - **Принимаемые значения**: метка блока кода
  - **Возращаемое значение**: не возвращает значение
  - **Примеры**

```QASM
jep block ; Допустимо (при том условии, что блок кода под меткой block существует и вершина стека равна 1)
```

- `jnp`
  - **Описание**: перепрыгивает на указанный блок кода, если вершина стека равна `0`
  - **Принимаемые значения**: метка блока кода
  - **Возращаемое значение**: не возвращает значение
  - **Примеры**

```QASM
jnp block ; Допустимо (при том условии, что блок кода под меткой block существует и вершина стека равна 0)
```

- `sum`
  - **Описание**: суммирует 2 значения и кладет результат в `RAX`
  - **Принимаемые значения**: 2 любых значения
  - **Возращаемое значение**: результат суммирования в `RAX`
  - **Примеры**

```QASM
sum [100], [100]  ; Допустимо
sum rax, al       ; Допустимо
sum $0xAA, al     ; Допустимо
sum [100]         ; Недопустимо, тк на вход обязательно только 2 значения
```

- `sub`
  - **Описание**: вычитает 2 значения и кладет результат в `RAX`
  - **Принимаемые значения**: 2 любых значения
  - **Возращаемое значение**: результат вычитания в `RAX`
  - **Примеры**

```QASM
sub [100], [100]  ; Допустимо
sub rax, al       ; Допустимо
sub $0xAA, al     ; Допустимо
sub [100]         ; Недопустимо, тк на вход обязательно только 2 значения
```

- `div`
  - **Описание**: делит 2 значения и кладет результат в `RAX`
  - **Принимаемые значения**: 2 любых значения
  - **Возращаемое значение**: результат деления в `RAX`
  - **Примеры**

```QASM
div [100], [100]  ; Допустимо
div rax, al       ; Допустимо
div $0xAA, al     ; Допустимо
div [100]         ; Недопустимо, тк на вход обязательно только 2 значения
```

- `mlt`
  - **Описание**: умножает 2 значения и кладет результат в `RAX`
  - **Принимаемые значения**: 2 любых значения
  - **Возращаемое значение**: результат умножения в `RAX`
  - **Примеры**

```QASM
mlt [100], [100]  ; Допустимо
mlt rax, al       ; Допустимо
mlt $0xAA, al     ; Допустимо
mlt [100]         ; Недопустимо, тк на вход обязательно только 2 значения
```

- `pwr`
  - **Описание**: возводит 1 значение в степень другого и кладет результат в `RAX`
  - **Принимаемые значения**: 2 любых значения
  - **Возращаемое значение**: результат возведения в степень в `RAX`
  - **Примеры**

```QASM
pwr [100], [100]  ; Допустимо
pwr rax, al       ; Допустимо
pwr $0xAA, al     ; Допустимо
pwr [100]         ; Недопустимо, тк на вход обязательно только 2 значения
```

- `alc`
  - **Описание**: выделяет определенное количество бит в куче
  - **Принимаемые значения**: размер выделяемой памяти
  - **Возращаемое значение**: в регистр `RDI` записывается выделенный адрес
  - **Примеры**

```QASM
alc 0xAA ; Допустимо
```

- `fr`
  - **Описание**: освобождает память после `alc`
  - **Принимаемые значения**: адрес и размер выделенной памяти чтобы её освободить
  - **Возращаемое значение**: не возращает значение
  - **Примеры**

```QASM
fr 0xAA, [100] ; Допустимо
```

- `gt`
  - **Описание**: выдает значение из кучи после `alc` по адресу
  - **Принимаемые значения**: адрес и размер запращиваемой памяти
  - **Возращаемое значение**: в регистр `RDI` записывается информация по адресу, а в региср `RDX` размер этой информации
  - **Примеры**

```QASM
gt 0xAA ; Допустимо
```

- `syscall`
  - **Описание**: выполняет вызов системной функции
  - **Принимаемые значения**: строка для выполнения
  - **Возращаемое значение**: не возвращает значение
  - **Примеры**

```QASM
syscall clear ; Допустимо. Очищает консоль
```

- `clean`
  - **Описание**: освобождает строковые регистры (`RSI` и `RCX`)
  - **Принимаемые значения**: не принимает значения
  - **Возращаемое значение**: не возвращает значения
  - **Примеры**

```QASM
clean ; Допустимо
```

- `setch`
  - **Описание**: добавляет новый символ в регистр `RSI` и увеличивает на `1` регистр `RCX`
  - **Принимаемые значения**: любое одно значение в пределе от `0` до `255`
  - **Возращаемое значение**: добавляет новый символ в регистр `RSI` и увеличивает на `1` регистр `RCX`
  - **Примеры**

```QASM
setch 'a'  ; Допустимо
setch [100] ; Допустимо
setch 'a', 'b' ; Недопустимо, на вход только одно значение
```

- `write`
  - **Описание**: выводит в консоль содержимое регистра `RSI`
  - **Принимаемые значения**: не принимает значения
  - **Возращаемое значение**: не возвращает значения
  - **Примеры**

```QASM
write ; Допустимо
```

## Синтаксис языка

Для того, чтобы написать простейшую программу нужно:

1. Обозначить глобальную точку входа:

```QASM
...
[global:main]
...
```

2. Обозначить данную точку входа:

```QASM
.main:
    ...

[global:main]
```

3. Можно писать код!

```QASM
.main:
    setch 'H'
    write

[global:main]
```

4. Для использования команд `jmp` / `jep` / `jnp` нужно обозначить новые блоки кода:

```QASM
.main:
    jmp block

.block:
    setch 'H'
    write
```

### Синтаксис

1. Для комментария в начале строки поставте `;`

2. Для того, чтобы обозначить число при передаче значения заключите число в квадратные скобки

```QASM
reg rax, [100]
```

3. Для того, чтобы обозначить адрес в динамической памяти поставте `$` перед адресом

```QASM
setch $0xAA
```

4. Для того, чтобы обозначить регистр просто напишите его маленькими буквами

```QASM
setch rax
```